{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/waiting.jpg","components/error.gif","services/pixabay-api.js","App.js","index.js","App.module.css","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","queue","handleChange","currentTarget","name","value","setState","handleSubmit","event","preventDefault","props","onSubmit","reset","className","s","searchbar","searchForm","this","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","Modal","loading","backdropHandler","target","onClose","handleKeyDown","e","code","handleImageLoaded","prevState","window","addEventListener","removeEventListener","src","alt","overlay","onClick","modal","onLoad","color","height","ImageGalleryItem","openModal","largeSrc","imageClickHandler","dataset","largeimg","toggleModal","imageData","id","webformatURL","largeImageURL","imageGalleryItem","image","ImageGallery","imageGallery","gallery","map","item","index","Button","Api","loader","api","fetchImages","page","fetch","then","response","ok","json","Promise","reject","Error","Status","App","searchQueue","status","error","formSubmitHandler","loadMoreHandler","nextQueue","data","hits","catch","prevProps","prevQueue","total","scrollBy","top","document","documentElement","scrollHeight","behavior","waiting","waitingImg","Loader","message","errorImg","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.53d5a795.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__gf92U\",\"image\":\"ImageGalleryItem_image__13k_V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2Lj2-\",\"modal\":\"Modal_modal__2q_Hj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__3RItJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3znzq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__GSY3z\"};","import { Component } from 'react';\nimport s from './Searchbar.module.css';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    queue: '',\n  };\n\n  handleChange = ({ currentTarget: { name, value } }) => {\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.props.onSubmit(this.state.queue);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({ queue: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form className={s.searchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.label}>Search</span>\n          </button>\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"queue\"\n            value={this.state.queue}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import { Component } from 'react';\nimport s from './Modal.module.css';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport PropTypes from 'prop-types';\n\nclass Modal extends Component {\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  state = {\n    loading: false,\n  };\n\n  toggleLoadind() {\n    this.setState(prevState => {\n      return { loading: !prevState.loading };\n    });\n  }\n  backdropHandler = ({ target, currentTarget }) => {\n    if (target === currentTarget) {\n      this.props.onClose();\n    }\n  };\n  componentDidMount() {\n    this.setState({ loading: true });\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleImageLoaded = () => {\n    this.setState({ loading: false });\n  };\n\n  render() {\n    const { src, alt } = this.props;\n    return (\n      <div className={s.overlay} onClick={this.backdropHandler}>\n        <img\n          className={s.modal}\n          src={src}\n          alt={alt}\n          onLoad={this.handleImageLoaded}\n        />\n        {this.state.loading && (\n          <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={350} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport s from './ImageGalleryItem.module.css';\nimport Modal from '../Modal';\nimport PropTypes from 'prop-types';\n\nclass ImageGalleryItem extends Component {\n  static propTypes = {\n    imageData: PropTypes.shape({\n      id: PropTypes.number,\n      webformatURL: PropTypes.string,\n      largeImageURL: PropTypes.string,\n    }),\n  };\n\n  state = {\n    openModal: false,\n    largeSrc: null,\n  };\n\n  imageClickHandler = e => {\n    this.setState({\n      largeSrc: e.target.dataset.largeimg,\n    });\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(prevState => {\n      return { openModal: !prevState.openModal };\n    });\n  };\n\n  render() {\n    const { id, webformatURL, largeImageURL } = this.props.imageData;\n    const { openModal } = this.state;\n    return (\n      <>\n        <li className={s.imageGalleryItem}>\n          <img\n            src={webformatURL}\n            alt={id}\n            className={s.image}\n            onClick={this.imageClickHandler}\n          />\n        </li>\n        {openModal && <Modal onClose={this.toggleModal} src={largeImageURL} />}\n      </>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    gallery: PropTypes.array.isRequired,\n  };\n  render() {\n    return (\n      <ul className={s.imageGallery}>\n        {this.props.gallery.map((item, index) => {\n          return <ImageGalleryItem imageData={item} key={index} />;\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nclass Button extends Component {\n  static propTypes = {\n    onClick: PropTypes.func,\n  };\n  state = {};\n  render() {\n    return (\n      <button type=\"button\" className={s.button} onClick={this.props.onClick}>\n        Load more\n      </button>\n    );\n  }\n}\n\nexport default Button;\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nclass Api extends Component {\n  state = {};\n  render() {\n    return (\n      <div className={s.loader}>\n        <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={60} />\n      </div>\n    );\n  }\n}\n\nexport default Api;\n","export default __webpack_public_path__ + \"static/media/waiting.20c59006.jpg\";","export default __webpack_public_path__ + \"static/media/error.4efd80f6.gif\";","const API_KEY = '18969106-b552d166da3dfed7b4523ee16';\n\nfunction fetchImages(queue, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${queue}&page=${page}&key=${API_KEY}&image_type=all&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`Не удалось найти картинки по запросу \"${queue}\"`),\n    );\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { Component } from 'react';\nimport s from './App.module.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport waitingImg from './components/waiting.jpg';\nimport errorImg from './components/error.gif';\nimport Api from './services/pixabay-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass App extends Component {\n  state = {\n    gallery: [],\n    searchQueue: '',\n    page: 1,\n    status: Status.IDLE,\n    error: null,\n  };\n\n  formSubmitHandler = searchQueue => {\n    this.setState({\n      searchQueue,\n      page: 1,\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQueue = prevState.searchQueue;\n    const nextQueue = this.state.searchQueue;\n    const page = this.state.page;\n\n    if (prevQueue !== nextQueue) {\n      this.setState({\n        status: Status.PENDING,\n      });\n      Api.fetchImages(nextQueue, page)\n        .then(data => {\n          if (data.total < 1) {\n            return Promise.reject(\n              new Error(`Не удалось найти картинки по запросу ${nextQueue}`),\n            );\n          }\n          this.setState(prevState => {\n            return {\n              gallery: data.hits,\n              status: Status.RESOLVED,\n              page: prevState.page + 1,\n            };\n          });\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }\n    window.scrollBy({\n      top: document.documentElement.scrollHeight - 130,\n      behavior: 'smooth',\n    }, 500);\n  }\n\n  loadMoreHandler = () => {\n    const nextQueue = this.state.searchQueue;\n    const page = this.state.page;\n\n    this.setState({\n      status: Status.PENDING,\n    });\n    Api.fetchImages(nextQueue, page)\n      .then(data => {\n        this.setState(prevState => {\n          return {\n            gallery: [...prevState.gallery, ...data.hits],\n            status: Status.RESOLVED,\n            page: prevState.page + 1,\n          };\n        });\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  render() {\n    const { status, gallery, error } = this.state;\n\n    if (status === 'idle') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <div className={s.waiting}>\n            <p> Waiting for queue</p>\n            <img src={waitingImg} alt=\"waiting\" className={s.image} />\n          </div>\n        </div>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <ImageGallery gallery={gallery} />\n          <Button />\n          <Loader />\n        </div>\n      );\n    }\n\n    if (status === 'rejected') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <div className={s.waiting}>\n            <p>{error.message}</p>\n            <img src={errorImg} alt=\"error\" className={s.image} />\n          </div>\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <div className={s.App}>\n          <Searchbar onSubmit={this.formSubmitHandler} />\n          <ImageGallery gallery={gallery} />\n          <Button onClick={this.loadMoreHandler} />\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport React from 'react';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__GG9zq\",\"waiting\":\"App_waiting__3Jxt1\",\"image\":\"App_image__EEhqj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3eGg5\",\"searchForm\":\"Searchbar_searchForm__mBnVS\",\"button\":\"Searchbar_button__3s9xM\",\"label\":\"Searchbar_label__-FqAY\",\"input\":\"Searchbar_input__nqWuY\"};"],"sourceRoot":""}